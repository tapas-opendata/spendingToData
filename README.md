# Як оприлюднити звітність та договори зі spending.gov.ua на data.gov.ua

## Вступ
На бухгалтерів покладена велика кількість обов’язків пов’язаних з оприлюднення відкритих даних. Робота з [Prozorro](https://prozorro.gov.ua/), [Єдиним веб-порталом використання публічних фінансів (spending.gov.ua)](https://spending.gov.ua/), [Єдиним державним порталом відкритих даних (data.gov.ua)](https://data.gov.ua/) забирає багато часу, а розміщена інформація частково дублюється. [Постанова КМУ №835 (зі змінами)](http://zakon0.rada.gov.ua/laws/show/835-2015-%D0%BF) вимагає від органів місцевого самоврядування оприлюднювати набір даних **"Перелік укладених договорів, укладені договори, інші правочини, додатки, додаткові угоди та інші матеріали до них"**. Також органи місцевого самоврядування можуть зобов'язати комунальні підприємства оприлюднювати **фінансову звітність у формі відкритих даних**. Дані з цих наборів вже частково оприлюднені на spending.gov.ua. Тому, дублювати їх на data.gov.ua або місцевих порталах відкритих даних недоцільно. Електронні таблиці (XLS, XLSX, ODS), що зазвичай використовуються в таких випадках, мають низку цінність через заголовки та об’єднані комірки. Значно ефективніше оприлюднити дані зі spending.gov.ua на data.gov.ua через API (детальніше що це, і як це зробити розглянемо нижче). Решту даних, які не оприлюднюються на spending.gov.ua портібно додати у звичних електронних таблицях або CSV (якщо дані гарно структуровані). 
**Яких результатів можна досягти впровадивши ці рекомендації.**
1. **Зменшення робочого навантаження на бухгалтерів та відповідальних осіб.** Дані зі spending.gov.ua потрібно оприлюднити на data.gov.ua всього 1 раз. Надалі вони оновлюватимуться автоматично. Після цього регулярно оновлювати доведеться лише звітність та договори які не заносяться в spending.gov.ua.
2. **Якісні дані.** spending.gov.ua віддаватиме користувачам вже готові до аналізу та використання у програмному забезпеченні дані у машиночитаному форматі (JSON).
3. **Надійність.** Іноді бухгалтери неохоче оприлюднюють документи “без печаток”, бо користувачі можуть легко змінити інформацію в них. Дані, що оприлюднюються на spending.gov.ua, підписані електронним цифровим підписом.

## Що таке API spending.gov.ua?
Сервіси в мережі Інтернет мають бази даних, де зберігають інформацію користувачів. Прикладами баз spending.gov.ua є бази даних звітів, транзакцій, договорів та інше. Для того, щоб дати доступ до цих баз через мережу Інтернет, розробники створюють спеціальний функціонал, який носить назву API (з англ. - інтерфейс прикладного програмування). 

Всім відомо, що кожна сторінка в мережі Інтернет має власну унікальну адресу, наприклад, [`https://dniprorada.gov.ua/`](https://dniprorada.gov.ua/) або [`https://www.lutskrada.gov.ua/`](https://www.lutskrada.gov.ua/), так само і дані кожного розпорядника на spending.gov.ua мають свою адресу. Наприклад, перелік договорів Дніпровської міської ради (номер в ЄДР - 26510514) можна отрмати за адресою

[```http://api.spending.gov.ua/api/v2/disposers/contracts?disposerId=26510514```](http://api.spending.gov.ua/api/v2/disposers/contracts?disposerId=26510514)

Виконавчого комітету Луцької міської ради (номер в ЄДР - 04051327) - 

[```http://api.spending.gov.ua/api/v2/disposers/contracts?disposerId=04051327```](http://api.spending.gov.ua/api/v2/disposers/contracts?disposerId=04051327)

Такий спосіб отримання даних можна можна умовно назвати API. **Якщо порівняти посилання, то відрізняються вони лише останніми цифрами - номером в ЄДР.** API spending.gov.ua повертає дані у форматі JSON. Він не зрозумілий для сприйняття людини але якнайкраще підходить для машинної обробки. Тому, якщо для вас є незрозумілою велика кількість символів на моніторі - це природно. Переглянути ієрархічну структуру JSON-файлів можна за допомогою додатку [JSONView](https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc/) до веб-переглядача Google Chrome.

```
{
  "size": 1000,
  "count": 2311,
  "moreThenCount": false,
  "documents": [
    {
      "id": 1450996651,
      "edrpou": "04051327",
      "documentNumber": "390",
      "documentDate": "2018-10-19",
      "signDate": "2018-11-02",
      "signature": {
        "caAddress": "ca.informjust.ua"
      },
      "amount": 2325.07,
      "currency": "UAH",
      "currencyAmountUAH": 0,
      "contractors": [
        {
          "identifier": "00182857",
          "contractorType": 2,
          "name": "ВОЛИНСЬКЕ ОБЛАСНЕ СПЕЦІАЛІЗОВАНЕ РЕМОНТНО-БУДІВЕЛЬНЕ ПІДПРИЄМСТВО ПРОТИПОЖЕЖНИХ РОБІТ",
          "firstName": "Г.",
          "lastName": "ЗАГОРОДНІЙ",
          "middleName": "І.",
          "address": {...}
        }
      ],
      "fromDate": "2018-10-19",
      "toDate": "2018-12-31",
      "subject": "ПРОВЕДЕННЯ РОБІТ З ТЕХНІЧНОГО ОБСЛУГОВУВАННЯ ВОГНЕГАСНИКІВ",
      "noTerm": false,
      "pdvInclude": true,
      "pdvAmount": 387.51,
      "tender": false,
      "reason": "ч.1 ст. 2 закону України Про державні закупівлі",
      "specifications": [],
      "isCpvVat": false,
      "procurementItems": []
    },
    {...},
    {...},
    ...
    {...}
  ]
}

```


Тепер можна спробувати навмисне ввести помилковий номер в ЄДР (00000000): 

[```http://api.spending.gov.ua/api/v2/disposers/contracts?disposerId=00000000```](http://api.spending.gov.ua/api/v2/disposers/contracts?disposerId=00000000)

Після завантаження портал поверне коротке повідомлення:

```{"size":0,"count":0,"moreThenCount":false,"documents":[]}```

Воно означає, що договорів за таким номером не знайдено. Якщо ви введете справжній номер у ЄДР і побачите таке повідомлення, це може означати помилку в номері або про те, що розпорядник не завантажив звітність.






